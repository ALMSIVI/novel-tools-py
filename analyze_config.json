{
  "default_package": "default",
  "packages": [
    {
      "name": "default",
      "list": [
        {
          "base": "readers",
          "ending": "reader"
        },
        {
          "base": "processors.matchers",
          "ending": "matcher"
        },
        {
          "base": "processors.validators",
          "ending": "validator"
        },
        {
          "base": "processors.transformers",
          "ending": "transformer"
        },
        {
          "base": "writers",
          "ending": "writer"
        }
      ]
    }
  ],
  "objects": {
    "readers": {
      "class": "TextReader",
      "encoding": "utf-8",
      "verbose": true
    },
    "matchers": [
      {
        "class": "NumberedMatcher",
        "type": "volume_title",
        "regex": "^第(.+)卷(.*)$"
      },
      {
        "class": "SpecialMatcher",
        "type": "volume_title",
        "affixes": ["前传", "最终卷", "后记", "番外篇"],
        "regex": "^{affixes}(.*)$"
      },
      {
        "class": "NumberedMatcher",
        "type": "chapter_title",
        "regex": "^第(.+)章(.*)$"
      },
      {
        "class": "SpecialMatcher",
        "type": "chapter_title",
        "affixes": ["序章", "楔子", "终章", "番外"],
        "regex": "^{affixes}(.*)$"
      }
    ],
    "validators": [
      {
        "class": "VolumeValidator",
        "discard_chapters": false,
        "correct": true,
        "verbose": true
      },
      {
        "class": "ChapterValidator",
        "discard_chapters": false,
        "correct": true,
        "verbose": true
      }
    ],
    "transformers": [
      { "class": "TypeTransformer" },
      { "class": "OrderTransformer" }
    ],
    "writers": [
      {
        "class": "CsvWriter",
        "formats": {
          "volume_title": {
            "column": "volume",
            "format": "第{index}卷 {content}"
          },
          "chapter_title": {
            "column": "chapter",
            "format": "第{index}章 {content}"
          }
        },
        "correct": true,
        "debug": true,
        "additional_fields": ["line_num", "raw", "order"]
      },
      {
        "class": "TocWriter",
        "formats": {
          "volume_title": "第{index}卷 {content}",
          "chapter_title": "第{index}章 {content}"
        },
        "debug": true
      },
      {
        "class": "FileWriter",
        "formats": {
          "volume_title": "第{index}卷 {content}",
          "chapter_title": "第{index}章 {content}"
        },
        "correct": true,
        "debug": true,
        "default_volume": "正文",
        "write_blank": true
      }
    ]
  }
}
